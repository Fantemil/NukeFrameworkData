import os 
import time
# going to current dir
os.chdir(os.path.dirname(os.path.realpath(__file__)))
def clr():
    if os.name == 'nt':
        os.system('cls')
    else:
        os.system('clear')

def exitrun():
    os.chdir("..")
    print("Returning to NukeFramework...")
    time.sleep(1)
    clr()
    os.system("python3 run.py")
    exit()


maybeprintfound = False
site = ""
currentdir = os.getcwd()
clr()
print("=====================================================================")
print("Welcome to Nukesherlock (Nuke Username OSINT tool on top of sherlock)")
print("=====================================================================")
username = input("\nEnter at least one Username (or type exit if you want to return to nf1): ")
if username == "exit":
    exitrun()
advanced = input("\nDo you want to continue with manual mode? (Answer no to continue with automatic mode) (y/n): ")
if advanced == "n":
    timeout = "--timeout 1"
    os.chdir(currentdir + "/sherlock") 
    os.system("python3 -m pip install -r requirements.txt")
    clr()
    print("Now starting sherlock...")
    time.sleep(1)
    clr()
    os.system("python3 sherlock " + username + " " + timeout)
    os.chdir("..")
    os.chdir("..")
    redirect = input("Do you want to get back to Nukeframework? (y/n): ")
    if redirect == "y":
        os.system("python3 run.py")
        exit()
    if redirect == "n":
        exit()
if advanced == "y":
    tor = ""
    tor = input("\nDo you want to use Tor? (y/n): ")
    if tor == "n":
        tor = ""
    elif tor == "y":
        tor = "--tor"
    siteask = input("\nDo you want to search on a specific site? (y/n): ")
    if siteask == "n":
        siteask = ""
    if siteask == "y":
        site = input("\nEnter the site you want to search on: ")
        site = "--site " + site
    timeout = input("\nDo you want to set a timeout? (y/n): ")
    if timeout == "n":
        timeout = ""
    if timeout == "y":
        timeout = "--timeout " + input("\nEnter your timeout in seconds: ")
    printall = input("\nDo you want to print all the results? (y/n): ")
    if printall == "n":
        printall = ""
        maybeprintfound = True
    if printall == "y":
        printall = "--print-all"
    verbose = input("\nDo you want a verbose output? (y/n): ")
    if verbose == "n":
        verbose = ""
    if verbose == "y":
        verbose = "--verbose"
    csv = input("\nDo you want to save the results in a csv file? (y/n): ")
    if csv == "n":
        csv = ""
    if csv == "y":
        csv = "--csv"
    proxy = input("\nDo you want to use a proxy? (y/n): ")
    if proxy == "n":
        proxy = ""
    if proxy == "y":
        proxy = "--proxy " + input("\nEnter your proxy: ")
    color = input("\nDo you want to deactivate output in color? (y/n): ")
    if color == "n":
        color = ""
    if color == "y":
        color = "--no-color"
    


    clr()
    print("Installing/Checking dependencies...")
    time.sleep(1)
    os.chdir(currentdir + "/sherlock") 
    os.system("python3 -m pip install -r requirements.txt")
    clr()
    print("Now starting sherlock...")
    time.sleep(1)
    clr()
    os.system("python3 sherlock " + username + " " + tor + " " + siteask + " " + site + " " + timeout + " " + printall + " " + verbose + " " + csv + " " + proxy + " " + color)
    os.chdir("..")
    os.chdir("..")
    redirect = input("Do you want to get back to Nukeframework? (y/n): ")
    if redirect == "y":
        os.system("python3 run.py")
        exit()
    if redirect == "n":
        exit()
    



